{"version":3,"file":"fetch-parameters.js","sources":["../src/fetch-parameters.ts"],"sourcesContent":["import { GetParametersByPathResult, Parameter, SSM } from '@aws-sdk/client-ssm';\n\nexport interface FetchParametersOptions {\n  region?: string;\n  withDecryption?: boolean;\n}\n\nexport async function fetchParameters(\n  ssmPath: string,\n  { region, withDecryption }: FetchParametersOptions = {},\n): Promise<Parameter[]> {\n  const ssm = new SSM({ region });\n\n  const allParameters: Parameter[] = [];\n  let nextToken: string | undefined = undefined;\n\n  do {\n    const result: GetParametersByPathResult = await ssm.getParametersByPath({\n      WithDecryption: withDecryption,\n      Path: ssmPath,\n      Recursive: true,\n      NextToken: nextToken,\n    });\n\n    nextToken = result.NextToken;\n    allParameters.push(...result.Parameters);\n  } while (nextToken);\n\n  return allParameters;\n}\n"],"names":[],"mappings":";;AAOO,eAAe,eAAe,CACnC,OAAe,EACf,EAAE,MAAM,EAAE,cAAc,EAAA,GAA6B,EAAE,EAAA;IAEvD,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC;IAE/B,MAAM,aAAa,GAAgB,EAAE;IACrC,IAAI,SAAS,GAAuB,SAAS;AAE7C,IAAA,GAAG;AACD,QAAA,MAAM,MAAM,GAA8B,MAAM,GAAG,CAAC,mBAAmB,CAAC;AACtE,YAAA,cAAc,EAAE,cAAc;AAC9B,YAAA,IAAI,EAAE,OAAO;AACb,YAAA,SAAS,EAAE,IAAI;AACf,YAAA,SAAS,EAAE,SAAS;AACrB,SAAA,CAAC;AAEF,QAAA,SAAS,GAAG,MAAM,CAAC,SAAS;QAC5B,aAAa,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,UAAU,CAAC;IAC1C,CAAC,QAAQ,SAAS;AAElB,IAAA,OAAO,aAAa;AACtB;;;;"}