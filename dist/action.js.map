{"version":3,"file":"action.js","sources":["../src/action.ts"],"sourcesContent":["import * as core from '@actions/core';\nimport { outputToFile } from './output-to-file.js';\nimport { fetchParameters } from './fetch-parameters.js';\n\nasync function run() {\n  try {\n    const region = process.env.AWS_DEFAULT_REGION;\n    const ssmPath = core.getInput('ssm-path', { required: true });\n    const format = core.getInput('format', { required: true });\n    const output = core.getInput('output', { required: true });\n    const prefix = core.getInput('prefix');\n    const withDecryption = core.getInput('decryption') === 'true';\n\n    try {\n      const parameters = await fetchParameters(ssmPath, {\n        region,\n        withDecryption,\n      });\n\n      if (format === 'github-actions') {\n        parameters.forEach(p => {\n          core.exportVariable(p.Name, p.Value);\n        });\n      } else {\n        await outputToFile(parameters, output, {\n          format,\n          prefix,\n        });\n      }\n    } catch (e) {\n      core.error(e);\n      core.setFailed(e.message);\n    }\n  } catch (e) {\n    core.setFailed(e.message);\n  }\n}\n\nrun();\n"],"names":["core.getInput","core.exportVariable","core.error","core.setFailed"],"mappings":";;;;AAIA,eAAe,GAAG,GAAA;AAChB,IAAA,IAAI;AACF,QAAA,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,kBAAkB;AAC7C,QAAA,MAAM,OAAO,GAAGA,oBAAa,CAAC,UAAU,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;AAC7D,QAAA,MAAM,MAAM,GAAGA,oBAAa,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;AAC1D,QAAA,MAAM,MAAM,GAAGA,oBAAa,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAC1D,MAAM,MAAM,GAAGA,oBAAa,CAAC,QAAQ,CAAC;QACtC,MAAM,cAAc,GAAGA,oBAAa,CAAC,YAAY,CAAC,KAAK,MAAM;AAE7D,QAAA,IAAI;AACF,YAAA,MAAM,UAAU,GAAG,MAAM,eAAe,CAAC,OAAO,EAAE;gBAChD,MAAM;gBACN,cAAc;AACf,aAAA,CAAC;AAEF,YAAA,IAAI,MAAM,KAAK,gBAAgB,EAAE;AAC/B,gBAAA,UAAU,CAAC,OAAO,CAAC,CAAC,IAAG;oBACrBC,0BAAmB,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC;AACtC,gBAAA,CAAC,CAAC;YACJ;iBAAO;AACL,gBAAA,MAAM,YAAY,CAAC,UAAU,EAAE,MAAM,EAAE;oBACrC,MAAM;oBACN,MAAM;AACP,iBAAA,CAAC;YACJ;QACF;QAAE,OAAO,CAAC,EAAE;AACV,YAAAC,iBAAU,CAAC,CAAC,CAAC;AACb,YAAAC,qBAAc,CAAC,CAAC,CAAC,OAAO,CAAC;QAC3B;IACF;IAAE,OAAO,CAAC,EAAE;AACV,QAAAA,qBAAc,CAAC,CAAC,CAAC,OAAO,CAAC;IAC3B;AACF;AAEA,GAAG,EAAE"}