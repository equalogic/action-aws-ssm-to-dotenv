{"version":3,"file":"checkUrl.js","sources":["../../../../../../node_modules/@aws-sdk/credential-provider-http/dist-es/fromHttp/checkUrl.js"],"sourcesContent":["import { CredentialsProviderError } from \"@smithy/property-provider\";\nconst LOOPBACK_CIDR_IPv4 = \"127.0.0.0/8\";\nconst LOOPBACK_CIDR_IPv6 = \"::1/128\";\nconst ECS_CONTAINER_HOST = \"169.254.170.2\";\nconst EKS_CONTAINER_HOST_IPv4 = \"169.254.170.23\";\nconst EKS_CONTAINER_HOST_IPv6 = \"[fd00:ec2::23]\";\nexport const checkUrl = (url, logger) => {\n    if (url.protocol === \"https:\") {\n        return;\n    }\n    if (url.hostname === ECS_CONTAINER_HOST ||\n        url.hostname === EKS_CONTAINER_HOST_IPv4 ||\n        url.hostname === EKS_CONTAINER_HOST_IPv6) {\n        return;\n    }\n    if (url.hostname.includes(\"[\")) {\n        if (url.hostname === \"[::1]\" || url.hostname === \"[0000:0000:0000:0000:0000:0000:0000:0001]\") {\n            return;\n        }\n    }\n    else {\n        if (url.hostname === \"localhost\") {\n            return;\n        }\n        const ipComponents = url.hostname.split(\".\");\n        const inRange = (component) => {\n            const num = parseInt(component, 10);\n            return 0 <= num && num <= 255;\n        };\n        if (ipComponents[0] === \"127\" &&\n            inRange(ipComponents[1]) &&\n            inRange(ipComponents[2]) &&\n            inRange(ipComponents[3]) &&\n            ipComponents.length === 4) {\n            return;\n        }\n    }\n    throw new CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:\n  - loopback CIDR 127.0.0.0/8 or [::1/128]\n  - ECS container host 169.254.170.2\n  - EKS container host 169.254.170.23 or [fd00:ec2::23]`, { logger });\n};\n"],"names":[],"mappings":";;AAGA,MAAM,kBAAkB,GAAG,eAAe;AAC1C,MAAM,uBAAuB,GAAG,gBAAgB;AAChD,MAAM,uBAAuB,GAAG,gBAAgB;AACpC,MAAC,QAAQ,GAAG,CAAC,GAAG,EAAE,MAAM,KAAK;AACzC,IAAI,IAAI,GAAG,CAAC,QAAQ,KAAK,QAAQ,EAAE;AACnC,QAAQ;AACR,IAAI;AACJ,IAAI,IAAI,GAAG,CAAC,QAAQ,KAAK,kBAAkB;AAC3C,QAAQ,GAAG,CAAC,QAAQ,KAAK,uBAAuB;AAChD,QAAQ,GAAG,CAAC,QAAQ,KAAK,uBAAuB,EAAE;AAClD,QAAQ;AACR,IAAI;AACJ,IAAI,IAAI,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACpC,QAAQ,IAAI,GAAG,CAAC,QAAQ,KAAK,OAAO,IAAI,GAAG,CAAC,QAAQ,KAAK,2CAA2C,EAAE;AACtG,YAAY;AACZ,QAAQ;AACR,IAAI;AACJ,SAAS;AACT,QAAQ,IAAI,GAAG,CAAC,QAAQ,KAAK,WAAW,EAAE;AAC1C,YAAY;AACZ,QAAQ;AACR,QAAQ,MAAM,YAAY,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC;AACpD,QAAQ,MAAM,OAAO,GAAG,CAAC,SAAS,KAAK;AACvC,YAAY,MAAM,GAAG,GAAG,QAAQ,CAAC,SAAS,EAAE,EAAE,CAAC;AAC/C,YAAY,OAAO,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG;AACzC,QAAQ,CAAC;AACT,QAAQ,IAAI,YAAY,CAAC,CAAC,CAAC,KAAK,KAAK;AACrC,YAAY,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AACpC,YAAY,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AACpC,YAAY,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AACpC,YAAY,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE;AACvC,YAAY;AACZ,QAAQ;AACR,IAAI;AACJ,IAAI,MAAM,IAAI,wBAAwB,CAAC,CAAC;AACxC;AACA;AACA,uDAAuD,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC;AACrE;;;;","x_google_ignoreList":[0]}