{"version":3,"file":"defaultProvider.js","sources":["../../../../../node_modules/@aws-sdk/credential-provider-node/dist-es/defaultProvider.js"],"sourcesContent":["import { ENV_KEY, ENV_SECRET, fromEnv } from \"@aws-sdk/credential-provider-env\";\nimport { chain, CredentialsProviderError, memoize } from \"@smithy/property-provider\";\nimport { ENV_PROFILE } from \"@smithy/shared-ini-file-loader\";\nimport { remoteProvider } from \"./remoteProvider\";\nlet multipleCredentialSourceWarningEmitted = false;\nexport const defaultProvider = (init = {}) => memoize(chain(async () => {\n    const profile = init.profile ?? process.env[ENV_PROFILE];\n    if (profile) {\n        const envStaticCredentialsAreSet = process.env[ENV_KEY] && process.env[ENV_SECRET];\n        if (envStaticCredentialsAreSet) {\n            if (!multipleCredentialSourceWarningEmitted) {\n                const warnFn = init.logger?.warn && init.logger?.constructor?.name !== \"NoOpLogger\" ? init.logger.warn : console.warn;\n                warnFn(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:\n    Multiple credential sources detected: \n    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.\n    This SDK will proceed with the AWS_PROFILE value.\n    \n    However, a future version may change this behavior to prefer the ENV static credentials.\n    Please ensure that your environment only sets either the AWS_PROFILE or the\n    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.\n`);\n                multipleCredentialSourceWarningEmitted = true;\n            }\n        }\n        throw new CredentialsProviderError(\"AWS_PROFILE is set, skipping fromEnv provider.\", {\n            logger: init.logger,\n            tryNextLink: true,\n        });\n    }\n    init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromEnv\");\n    return fromEnv(init)();\n}, async () => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromSSO\");\n    const { ssoStartUrl, ssoAccountId, ssoRegion, ssoRoleName, ssoSession } = init;\n    if (!ssoStartUrl && !ssoAccountId && !ssoRegion && !ssoRoleName && !ssoSession) {\n        throw new CredentialsProviderError(\"Skipping SSO provider in default chain (inputs do not include SSO fields).\", { logger: init.logger });\n    }\n    const { fromSSO } = await import(\"@aws-sdk/credential-provider-sso\");\n    return fromSSO(init)();\n}, async () => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromIni\");\n    const { fromIni } = await import(\"@aws-sdk/credential-provider-ini\");\n    return fromIni(init)();\n}, async () => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromProcess\");\n    const { fromProcess } = await import(\"@aws-sdk/credential-provider-process\");\n    return fromProcess(init)();\n}, async () => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile\");\n    const { fromTokenFile } = await import(\"@aws-sdk/credential-provider-web-identity\");\n    return fromTokenFile(init)();\n}, async () => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::remoteProvider\");\n    return (await remoteProvider(init))();\n}, async () => {\n    throw new CredentialsProviderError(\"Could not load credentials from any providers\", {\n        tryNextLink: false,\n        logger: init.logger,\n    });\n}), credentialsTreatedAsExpired, credentialsWillNeedRefresh);\nexport const credentialsWillNeedRefresh = (credentials) => credentials?.expiration !== undefined;\nexport const credentialsTreatedAsExpired = (credentials) => credentials?.expiration !== undefined && credentials.expiration.getTime() - Date.now() < 300000;\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}