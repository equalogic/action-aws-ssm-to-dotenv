{"version":3,"file":"httpRequest.js","sources":["../../../../../../node_modules/@smithy/credential-provider-imds/dist-es/remoteProvider/httpRequest.js"],"sourcesContent":["import { ProviderError } from \"@smithy/property-provider\";\nimport { Buffer } from \"buffer\";\nimport { request } from \"http\";\nexport function httpRequest(options) {\n    return new Promise((resolve, reject) => {\n        const req = request({\n            method: \"GET\",\n            ...options,\n            hostname: options.hostname?.replace(/^\\[(.+)\\]$/, \"$1\"),\n        });\n        req.on(\"error\", (err) => {\n            reject(Object.assign(new ProviderError(\"Unable to connect to instance metadata service\"), err));\n            req.destroy();\n        });\n        req.on(\"timeout\", () => {\n            reject(new ProviderError(\"TimeoutError from instance metadata service\"));\n            req.destroy();\n        });\n        req.on(\"response\", (res) => {\n            const { statusCode = 400 } = res;\n            if (statusCode < 200 || 300 <= statusCode) {\n                reject(Object.assign(new ProviderError(\"Error response received from instance metadata service\"), { statusCode }));\n                req.destroy();\n            }\n            const chunks = [];\n            res.on(\"data\", (chunk) => {\n                chunks.push(chunk);\n            });\n            res.on(\"end\", () => {\n                resolve(Buffer.concat(chunks));\n                req.destroy();\n            });\n        });\n        req.end();\n    });\n}\n"],"names":[],"mappings":";;;;AAGO,SAAS,WAAW,CAAC,OAAO,EAAE;AACrC,IAAI,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AAC5C,QAAQ,MAAM,GAAG,GAAG,OAAO,CAAC;AAC5B,YAAY,MAAM,EAAE,KAAK;AACzB,YAAY,GAAG,OAAO;AACtB,YAAY,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;AACnE,SAAS,CAAC;AACV,QAAQ,GAAG,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,KAAK;AACjC,YAAY,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,aAAa,CAAC,gDAAgD,CAAC,EAAE,GAAG,CAAC,CAAC;AAC3G,YAAY,GAAG,CAAC,OAAO,EAAE;AACzB,QAAQ,CAAC,CAAC;AACV,QAAQ,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM;AAChC,YAAY,MAAM,CAAC,IAAI,aAAa,CAAC,6CAA6C,CAAC,CAAC;AACpF,YAAY,GAAG,CAAC,OAAO,EAAE;AACzB,QAAQ,CAAC,CAAC;AACV,QAAQ,GAAG,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,GAAG,KAAK;AACpC,YAAY,MAAM,EAAE,UAAU,GAAG,GAAG,EAAE,GAAG,GAAG;AAC5C,YAAY,IAAI,UAAU,GAAG,GAAG,IAAI,GAAG,IAAI,UAAU,EAAE;AACvD,gBAAgB,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,aAAa,CAAC,wDAAwD,CAAC,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC;AAClI,gBAAgB,GAAG,CAAC,OAAO,EAAE;AAC7B,YAAY;AACZ,YAAY,MAAM,MAAM,GAAG,EAAE;AAC7B,YAAY,GAAG,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,KAAK,KAAK;AACtC,gBAAgB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;AAClC,YAAY,CAAC,CAAC;AACd,YAAY,GAAG,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM;AAChC,gBAAgB,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAC9C,gBAAgB,GAAG,CAAC,OAAO,EAAE;AAC7B,YAAY,CAAC,CAAC;AACd,QAAQ,CAAC,CAAC;AACV,QAAQ,GAAG,CAAC,GAAG,EAAE;AACjB,IAAI,CAAC,CAAC;AACN;;;;","x_google_ignoreList":[0]}