{"version":3,"file":"fromSharedConfigFiles.js","sources":["../../../../../node_modules/@smithy/node-config-provider/dist-es/fromSharedConfigFiles.js"],"sourcesContent":["import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { getProfileName, loadSharedConfigFiles } from \"@smithy/shared-ini-file-loader\";\nimport { getSelectorName } from \"./getSelectorName\";\nexport const fromSharedConfigFiles = (configSelector, { preferredFile = \"config\", ...init } = {}) => async () => {\n    const profile = getProfileName(init);\n    const { configFile, credentialsFile } = await loadSharedConfigFiles(init);\n    const profileFromCredentials = credentialsFile[profile] || {};\n    const profileFromConfig = configFile[profile] || {};\n    const mergedProfile = preferredFile === \"config\"\n        ? { ...profileFromCredentials, ...profileFromConfig }\n        : { ...profileFromConfig, ...profileFromCredentials };\n    try {\n        const cfgFile = preferredFile === \"config\" ? configFile : credentialsFile;\n        const configValue = configSelector(mergedProfile, cfgFile);\n        if (configValue === undefined) {\n            throw new Error();\n        }\n        return configValue;\n    }\n    catch (e) {\n        throw new CredentialsProviderError(e.message || `Not found in config files w/ profile [${profile}]: ${getSelectorName(configSelector.toString())}`, { logger: init.logger });\n    }\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAGY,MAAC,qBAAqB,GAAG,CAAC,cAAc,EAAE,EAAE,aAAa,GAAG,QAAQ,EAAE,GAAG,IAAI,EAAE,GAAG,EAAE,KAAK,YAAY;AACjH,IAAI,MAAM,OAAO,GAAG,cAAc,CAAC,IAAI,CAAC;AACxC,IAAI,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,GAAG,MAAM,qBAAqB,CAAC,IAAI,CAAC;AAC7E,IAAI,MAAM,sBAAsB,GAAG,eAAe,CAAC,OAAO,CAAC,IAAI,EAAE;AACjE,IAAI,MAAM,iBAAiB,GAAG,UAAU,CAAC,OAAO,CAAC,IAAI,EAAE;AACvD,IAAI,MAAM,aAAa,GAAG,aAAa,KAAK;AAC5C,UAAU,EAAE,GAAG,sBAAsB,EAAE,GAAG,iBAAiB;AAC3D,UAAU,EAAE,GAAG,iBAAiB,EAAE,GAAG,sBAAsB,EAAE;AAC7D,IAAI,IAAI;AACR,QAAQ,MAAM,OAAO,GAAG,aAAa,KAAK,QAAQ,GAAG,UAAU,GAAG,eAAe;AACjF,QAAQ,MAAM,WAAW,GAAG,cAAc,CAAC,aAAa,EAAE,OAAO,CAAC;AAClE,QAAQ,IAAI,WAAW,KAAK,SAAS,EAAE;AACvC,YAAY,MAAM,IAAI,KAAK,EAAE;AAC7B,QAAQ;AACR,QAAQ,OAAO,WAAW;AAC1B,IAAI;AACJ,IAAI,OAAO,CAAC,EAAE;AACd,QAAQ,MAAM,IAAI,wBAAwB,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,sCAAsC,EAAE,OAAO,CAAC,GAAG,EAAE,eAAe,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC;AACpL,IAAI;AACJ;;;;","x_google_ignoreList":[0]}