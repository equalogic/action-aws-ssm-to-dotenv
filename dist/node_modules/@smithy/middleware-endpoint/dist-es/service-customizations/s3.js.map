{"version":3,"file":"s3.js","sources":["../../../../../../node_modules/@smithy/middleware-endpoint/dist-es/service-customizations/s3.js"],"sourcesContent":["export const resolveParamsForS3 = async (endpointParams) => {\n    const bucket = endpointParams?.Bucket || \"\";\n    if (typeof endpointParams.Bucket === \"string\") {\n        endpointParams.Bucket = bucket.replace(/#/g, encodeURIComponent(\"#\")).replace(/\\?/g, encodeURIComponent(\"?\"));\n    }\n    if (isArnBucketName(bucket)) {\n        if (endpointParams.ForcePathStyle === true) {\n            throw new Error(\"Path-style addressing cannot be used with ARN buckets\");\n        }\n    }\n    else if (!isDnsCompatibleBucketName(bucket) ||\n        (bucket.indexOf(\".\") !== -1 && !String(endpointParams.Endpoint).startsWith(\"http:\")) ||\n        bucket.toLowerCase() !== bucket ||\n        bucket.length < 3) {\n        endpointParams.ForcePathStyle = true;\n    }\n    if (endpointParams.DisableMultiRegionAccessPoints) {\n        endpointParams.disableMultiRegionAccessPoints = true;\n        endpointParams.DisableMRAP = true;\n    }\n    return endpointParams;\n};\nconst DOMAIN_PATTERN = /^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/;\nconst IP_ADDRESS_PATTERN = /(\\d+\\.){3}\\d+/;\nconst DOTS_PATTERN = /\\.\\./;\nexport const DOT_PATTERN = /\\./;\nexport const S3_HOSTNAME_PATTERN = /^(.+\\.)?s3(-fips)?(\\.dualstack)?[.-]([a-z0-9-]+)\\./;\nexport const isDnsCompatibleBucketName = (bucketName) => DOMAIN_PATTERN.test(bucketName) && !IP_ADDRESS_PATTERN.test(bucketName) && !DOTS_PATTERN.test(bucketName);\nexport const isArnBucketName = (bucketName) => {\n    const [arn, partition, service, , , bucket] = bucketName.split(\":\");\n    const isArn = arn === \"arn\" && bucketName.split(\":\").length >= 6;\n    const isValidArn = Boolean(isArn && partition && service && bucket);\n    if (isArn && !isValidArn) {\n        throw new Error(`Invalid ARN: ${bucketName} was an invalid ARN.`);\n    }\n    return isValidArn;\n};\n"],"names":[],"mappings":"AAAY,MAAC,kBAAkB,GAAG,OAAO,cAAc,KAAK;AAC5D,IAAI,MAAM,MAAM,GAAG,cAAc,EAAE,MAAM,IAAI,EAAE;AAC/C,IAAI,IAAI,OAAO,cAAc,CAAC,MAAM,KAAK,QAAQ,EAAE;AACnD,QAAQ,cAAc,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,kBAAkB,CAAC,GAAG,CAAC,CAAC;AACrH,IAAI;AACJ,IAAI,IAAI,eAAe,CAAC,MAAM,CAAC,EAAE;AACjC,QAAQ,IAAI,cAAc,CAAC,cAAc,KAAK,IAAI,EAAE;AACpD,YAAY,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC;AACpF,QAAQ;AACR,IAAI;AACJ,SAAS,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC;AAC/C,SAAS,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC5F,QAAQ,MAAM,CAAC,WAAW,EAAE,KAAK,MAAM;AACvC,QAAQ,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;AAC3B,QAAQ,cAAc,CAAC,cAAc,GAAG,IAAI;AAC5C,IAAI;AACJ,IAAI,IAAI,cAAc,CAAC,8BAA8B,EAAE;AACvD,QAAQ,cAAc,CAAC,8BAA8B,GAAG,IAAI;AAC5D,QAAQ,cAAc,CAAC,WAAW,GAAG,IAAI;AACzC,IAAI;AACJ,IAAI,OAAO,cAAc;AACzB;AACA,MAAM,cAAc,GAAG,sCAAsC;AAC7D,MAAM,kBAAkB,GAAG,eAAe;AAC1C,MAAM,YAAY,GAAG,MAAM;AAGf,MAAC,yBAAyB,GAAG,CAAC,UAAU,KAAK,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU;AACrJ,MAAC,eAAe,GAAG,CAAC,UAAU,KAAK;AAC/C,IAAI,MAAM,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,MAAM,MAAM,CAAC,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC;AACvE,IAAI,MAAM,KAAK,GAAG,GAAG,KAAK,KAAK,IAAI,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,IAAI,CAAC;AACpE,IAAI,MAAM,UAAU,GAAG,OAAO,CAAC,KAAK,IAAI,SAAS,IAAI,OAAO,IAAI,MAAM,CAAC;AACvE,IAAI,IAAI,KAAK,IAAI,CAAC,UAAU,EAAE;AAC9B,QAAQ,MAAM,IAAI,KAAK,CAAC,CAAC,aAAa,EAAE,UAAU,CAAC,oBAAoB,CAAC,CAAC;AACzE,IAAI;AACJ,IAAI,OAAO,UAAU;AACrB;;;;","x_google_ignoreList":[0]}