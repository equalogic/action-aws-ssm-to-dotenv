import 'os';
import 'path';
import 'crypto';
import '../../../shared-ini-file-loader/dist-es/getSSOTokenFromFile.js';
import { CONFIG_PREFIX_SEPARATOR } from '../../../shared-ini-file-loader/dist-es/loadSharedConfigFiles.js';
import '../../../types/dist-es/auth/auth.js';
import '../../../types/dist-es/auth/HttpApiKeyAuth.js';
import '../../../types/dist-es/endpoint.js';
import '../../../types/dist-es/extensions/checksum.js';
import '../../../types/dist-es/http.js';
import '../../../types/dist-es/profile.js';
import '../../../types/dist-es/transfer.js';
import '../../../shared-ini-file-loader/dist-es/slurpFile.js';

const ENV_ENDPOINT_URL = "AWS_ENDPOINT_URL";
const CONFIG_ENDPOINT_URL = "endpoint_url";
const getEndpointUrlConfig = (serviceId) => ({
    environmentVariableSelector: (env) => {
        const serviceSuffixParts = serviceId.split(" ").map((w) => w.toUpperCase());
        const serviceEndpointUrl = env[[ENV_ENDPOINT_URL, ...serviceSuffixParts].join("_")];
        if (serviceEndpointUrl)
            return serviceEndpointUrl;
        const endpointUrl = env[ENV_ENDPOINT_URL];
        if (endpointUrl)
            return endpointUrl;
        return undefined;
    },
    configFileSelector: (profile, config) => {
        if (config && profile.services) {
            const servicesSection = config[["services", profile.services].join(CONFIG_PREFIX_SEPARATOR)];
            if (servicesSection) {
                const servicePrefixParts = serviceId.split(" ").map((w) => w.toLowerCase());
                const endpointUrl = servicesSection[[servicePrefixParts.join("_"), CONFIG_ENDPOINT_URL].join(CONFIG_PREFIX_SEPARATOR)];
                if (endpointUrl)
                    return endpointUrl;
            }
        }
        const endpointUrl = profile[CONFIG_ENDPOINT_URL];
        if (endpointUrl)
            return endpointUrl;
        return undefined;
    },
    default: undefined,
});

export { getEndpointUrlConfig };
//# sourceMappingURL=getEndpointUrlConfig.js.map
