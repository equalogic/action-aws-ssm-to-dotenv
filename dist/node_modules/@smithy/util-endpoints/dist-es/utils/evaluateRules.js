import { EndpointError } from '../types/EndpointError.js';
import { evaluateEndpointRule } from './evaluateEndpointRule.js';
import { evaluateErrorRule } from './evaluateErrorRule.js';
import { evaluateTreeRule } from './evaluateTreeRule.js';

const evaluateRules = (rules, options) => {
    for (const rule of rules) {
        if (rule.type === "endpoint") {
            const endpointOrUndefined = evaluateEndpointRule(rule, options);
            if (endpointOrUndefined) {
                return endpointOrUndefined;
            }
        }
        else if (rule.type === "error") {
            evaluateErrorRule(rule, options);
        }
        else if (rule.type === "tree") {
            const endpointOrUndefined = evaluateTreeRule(rule, options);
            if (endpointOrUndefined) {
                return endpointOrUndefined;
            }
        }
        else {
            throw new EndpointError(`Unknown endpoint rule: ${rule}`);
        }
    }
    throw new EndpointError(`Rules evaluation failed`);
};

export { evaluateRules };
//# sourceMappingURL=evaluateRules.js.map
