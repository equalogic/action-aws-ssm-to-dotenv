{"version":3,"file":"AdaptiveRetryStrategy.js","sources":["../../../../../node_modules/@smithy/util-retry/dist-es/AdaptiveRetryStrategy.js"],"sourcesContent":["import { RETRY_MODES } from \"./config\";\nimport { DefaultRateLimiter } from \"./DefaultRateLimiter\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy {\n    constructor(maxAttemptsProvider, options) {\n        this.maxAttemptsProvider = maxAttemptsProvider;\n        this.mode = RETRY_MODES.ADAPTIVE;\n        const { rateLimiter } = options ?? {};\n        this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n        this.standardRetryStrategy = new StandardRetryStrategy(maxAttemptsProvider);\n    }\n    async acquireInitialRetryToken(retryTokenScope) {\n        await this.rateLimiter.getSendToken();\n        return this.standardRetryStrategy.acquireInitialRetryToken(retryTokenScope);\n    }\n    async refreshRetryTokenForRetry(tokenToRenew, errorInfo) {\n        this.rateLimiter.updateClientSendingRate(errorInfo);\n        return this.standardRetryStrategy.refreshRetryTokenForRetry(tokenToRenew, errorInfo);\n    }\n    recordSuccess(token) {\n        this.rateLimiter.updateClientSendingRate({});\n        this.standardRetryStrategy.recordSuccess(token);\n    }\n}\n"],"names":[],"mappings":";;;;AAGO,MAAM,qBAAqB,CAAC;AACnC,IAAI,WAAW,CAAC,mBAAmB,EAAE,OAAO,EAAE;AAC9C,QAAQ,IAAI,CAAC,mBAAmB,GAAG,mBAAmB;AACtD,QAAQ,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC,QAAQ;AACxC,QAAQ,MAAM,EAAE,WAAW,EAAE,GAAG,OAAO,IAAI,EAAE;AAC7C,QAAQ,IAAI,CAAC,WAAW,GAAG,WAAW,IAAI,IAAI,kBAAkB,EAAE;AAClE,QAAQ,IAAI,CAAC,qBAAqB,GAAG,IAAI,qBAAqB,CAAC,mBAAmB,CAAC;AACnF,IAAI;AACJ,IAAI,MAAM,wBAAwB,CAAC,eAAe,EAAE;AACpD,QAAQ,MAAM,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE;AAC7C,QAAQ,OAAO,IAAI,CAAC,qBAAqB,CAAC,wBAAwB,CAAC,eAAe,CAAC;AACnF,IAAI;AACJ,IAAI,MAAM,yBAAyB,CAAC,YAAY,EAAE,SAAS,EAAE;AAC7D,QAAQ,IAAI,CAAC,WAAW,CAAC,uBAAuB,CAAC,SAAS,CAAC;AAC3D,QAAQ,OAAO,IAAI,CAAC,qBAAqB,CAAC,yBAAyB,CAAC,YAAY,EAAE,SAAS,CAAC;AAC5F,IAAI;AACJ,IAAI,aAAa,CAAC,KAAK,EAAE;AACzB,QAAQ,IAAI,CAAC,WAAW,CAAC,uBAAuB,CAAC,EAAE,CAAC;AACpD,QAAQ,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,KAAK,CAAC;AACvD,IAAI;AACJ;;;;","x_google_ignoreList":[0]}