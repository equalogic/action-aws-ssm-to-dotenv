{"version":3,"file":"set-socket-timeout.js","sources":["../../../../../node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js"],"sourcesContent":["import { DEFAULT_REQUEST_TIMEOUT } from \"./node-http-handler\";\nimport { timing } from \"./timing\";\nconst DEFER_EVENT_LISTENER_TIME = 3000;\nexport const setSocketTimeout = (request, reject, timeoutInMs = DEFAULT_REQUEST_TIMEOUT) => {\n    const registerTimeout = (offset) => {\n        const timeout = timeoutInMs - offset;\n        const onTimeout = () => {\n            request.destroy();\n            reject(Object.assign(new Error(`Connection timed out after ${timeoutInMs} ms`), { name: \"TimeoutError\" }));\n        };\n        if (request.socket) {\n            request.socket.setTimeout(timeout, onTimeout);\n            request.on(\"close\", () => request.socket?.removeListener(\"timeout\", onTimeout));\n        }\n        else {\n            request.setTimeout(timeout, onTimeout);\n        }\n    };\n    if (0 < timeoutInMs && timeoutInMs < 6000) {\n        registerTimeout(0);\n        return 0;\n    }\n    return timing.setTimeout(registerTimeout.bind(null, timeoutInMs === 0 ? 0 : DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n};\n"],"names":[],"mappings":";;;AAEA,MAAM,yBAAyB,GAAG,IAAI;AAC1B,MAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,WAAW,GAAG,uBAAuB,KAAK;AAC5F,IAAI,MAAM,eAAe,GAAG,CAAC,MAAM,KAAK;AACxC,QAAQ,MAAM,OAAO,GAAG,WAAW,GAAG,MAAM;AAC5C,QAAQ,MAAM,SAAS,GAAG,MAAM;AAChC,YAAY,OAAO,CAAC,OAAO,EAAE;AAC7B,YAAY,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,CAAC,2BAA2B,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC;AACtH,QAAQ,CAAC;AACT,QAAQ,IAAI,OAAO,CAAC,MAAM,EAAE;AAC5B,YAAY,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,SAAS,CAAC;AACzD,YAAY,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,OAAO,CAAC,MAAM,EAAE,cAAc,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;AAC3F,QAAQ;AACR,aAAa;AACb,YAAY,OAAO,CAAC,UAAU,CAAC,OAAO,EAAE,SAAS,CAAC;AAClD,QAAQ;AACR,IAAI,CAAC;AACL,IAAI,IAAI,CAAC,GAAG,WAAW,IAAI,WAAW,GAAG,IAAI,EAAE;AAC/C,QAAQ,eAAe,CAAC,CAAC,CAAC;AAC1B,QAAQ,OAAO,CAAC;AAChB,IAAI;AACJ,IAAI,OAAO,MAAM,CAAC,UAAU,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,KAAK,CAAC,GAAG,CAAC,GAAG,yBAAyB,CAAC,EAAE,yBAAyB,CAAC;AACtI;;;;","x_google_ignoreList":[0]}